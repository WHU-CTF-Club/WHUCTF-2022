FROM ubuntu:22.04

 MAINTAINER maybemia
 
 RUN apt-get update

 RUN apt-get install -y openssh-server netcat
 RUN mkdir -p /var/run/sshd
 RUN mkdir -p /root/.ssh
 # 取消 pam 限制
 RUN sed -ri 's/session requried pam_loginuid.so/#session required pam_loginuid.so/g' /etc/pam.d/sshd

 #ADD authorized_keys /root/.ssh/authorized_keys
 ADD attack.sh /attack.sh
 RUN chmod 755 /attack.sh
 
 EXPOSE 22
 # 设置自启动命令
 CMD ["/attack.sh"]